<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="男人要么拎枪保家卫国,要么办公室运筹帷幄">
<meta property="og:type" content="website">
<meta property="og:title" content="Martin Yu">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Martin Yu">
<meta property="og:description" content="男人要么拎枪保家卫国,要么办公室运筹帷幄">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Martin Yu">
<meta name="twitter:description" content="男人要么拎枪保家卫国,要么办公室运筹帷幄">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Martin Yu</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Martin Yu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">yukoyun</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/20/CentOs云服务器配置环境/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/20/CentOs云服务器配置环境/" itemprop="url">CentOs云服务器配置环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-20T14:07:04+08:00">
                2018-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>昨天团购买了一台垃圾服务器,不过对于我这种初级人来说,已经足够折腾玩了.但是,如何去配置我们需要的环境的呢.那我们开启人生的初体验吧(第一次配置服务器).</p>
</blockquote>
<h2 id="Python环境"><a href="#Python环境" class="headerlink" title="Python环境"></a>Python环境</h2><p>因为我想学习写后台,所以我选择搭建python环境.安装Python可以去下载Python3.x（不要再用Python2.7了!!），也可以通过Anaconda安装。我推荐使用<a href="https://www.anaconda.com/download/#linux" target="_blank" rel="external">Anaconda</a>安装，能省去很多体力活。下面就开始安装<a href="https://www.anaconda.com/download/#linux" target="_blank" rel="external">Anaconda</a><br><img src="http://img-blog.csdn.net/20180320142334413?watermark/2/text/Ly9ibG9nLmNzZG4ubmV0L0Vhc2tTaGFyaw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>下载下来的是一个sh文件，我们通过wget(<a href="http://man.linuxde.net/wget" target="_blank" rel="external">wget命令详解</a>)来下载,并通过sh来执行这个安装文件.</p>
<p>这是<a href="https://repo.continuum.io/archive/index.html" target="_blank" rel="external">Anaconda文件下载列表</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://repo.continuum.io/archive/Anaconda2-5.1.0-Linux-x86_64.sh</div></pre></td></tr></table></figure></p>
<p>之后通过ls命令查看文件名字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# ls</div><div class="line">Anaconda3-5.1.0-Linux-x86_64.sh</div></pre></td></tr></table></figure>
<p>通过sh命令安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sh Anaconda3-5.1.0-Linux-x86_64.sh</div></pre></td></tr></table></figure>
<p>最后通过python命令验证是否安装成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# python</div><div class="line">Python 2.7.5 (default, Aug  4 2017, 00:39:18)</div><div class="line">[GCC 4.8.5 20150623 (Red Hat 4.8.5-16)] on linux2</div><div class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>当看到python版本号,以及&gt;&gt;&gt;这个证明进入到python命令行</p>
<p>但是我们发现,我们安装的明明是3.x版本,怎么显示2.x版本.那是因为2.x是系统自带的,我们需要更改默认支持的版本为最新的3.x版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# ls</div><div class="line">anaconda3  Anaconda3-5.1.0-Linux-x86_64.sh  mysql57-community-release-el7-11.noarch.rpm</div><div class="line">[root@VM_0_3_centos ~]# cd anaconda3</div><div class="line">[root@VM_0_3_centos anaconda3]# alias python=/root/anaconda3/bin/python</div><div class="line">[root@VM_0_3_centos anaconda3]# python -V</div><div class="line">Python 3.6.4 :: Anaconda, Inc.</div></pre></td></tr></table></figure>
<p>最后我们看到python的版本号位3.x,证明修改成功</p>
<h2 id="mysql安装和配置"><a href="#mysql安装和配置" class="headerlink" title="mysql安装和配置"></a>mysql安装和配置</h2><p>下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget &apos;https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm&apos;</div></pre></td></tr></table></figure>
<p>添加yum源</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo rpm -Uvh mysql57-community-release-el7-11.noarch.rpm</div><div class="line"></div><div class="line">yum repolist all | grep mysql</div></pre></td></tr></table></figure>
<p>开始安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install mysql-community-server</div></pre></td></tr></table></figure>
<p>启动服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service mysqld start</div></pre></td></tr></table></figure>
<p>查看状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service status mysqld</div></pre></td></tr></table></figure>
<p>登录mysql(第一次登录是生成的随机密码)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p</div></pre></td></tr></table></figure>
<p>第一次登录的随机密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# sudo grep &apos;temporary password&apos; /var/log/mysqld.log</div><div class="line">2018-03-20T01:11:04.660167Z 1 [Note] A temporary password is generated for root@localhost: skhsLIp?Q6u-</div></pre></td></tr></table></figure>
<p>冒号后边的是临时密码</p>
<p><img src="http://img-blog.csdn.net/20180320150440191?watermark/2/text/Ly9ibG9nLmNzZG4ubmV0L0Vhc2tTaGFyaw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="">自定义登录密码(默认密码策略validate_password要求密码至少包含一个大写字母，一个小写字母，一个数字和一个特殊字符，并且总密码长度至少为8个字符。)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;MyNewPass4!&apos;;</div></pre></td></tr></table></figure>
<h2 id="安装mysql客户端-并远程连接调试"><a href="#安装mysql客户端-并远程连接调试" class="headerlink" title="安装mysql客户端.并远程连接调试"></a>安装mysql客户端.并远程连接调试</h2><p>我安装的是<a href="https://www.sequelpro.com/" target="_blank" rel="external">Sequel Pro</a>是一个免费的mac版本的mysql客户端</p>
<h4 id="本地远程连接我们的服务器"><a href="#本地远程连接我们的服务器" class="headerlink" title="本地远程连接我们的服务器"></a>本地远程连接我们的服务器</h4><p>然后打开我们的命令行远程连接到我们的服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@119.23.203.252</div></pre></td></tr></table></figure>
<p>后边的是我们自己买的云服务器的公网ip.回车之后输入密码就可以远程连接到我们的服务器了</p>
<h4 id="启动我们的mysql服务"><a href="#启动我们的mysql服务" class="headerlink" title="启动我们的mysql服务"></a>启动我们的mysql服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# service mysqld start</div></pre></td></tr></table></figure>
<h4 id="设置我们的mysql开机自启动"><a href="#设置我们的mysql开机自启动" class="headerlink" title="设置我们的mysql开机自启动"></a>设置我们的mysql开机自启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# chkconfig mysqld on</div></pre></td></tr></table></figure>
<h4 id="登录我们mysql"><a href="#登录我们mysql" class="headerlink" title="登录我们mysql"></a>登录我们mysql</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@VM_0_3_centos ~]# mysql -uroot -p</div></pre></td></tr></table></figure>
<h4 id="设置我们mysql可以在任何ip下账号密码登录"><a href="#设置我们mysql可以在任何ip下账号密码登录" class="headerlink" title="设置我们mysql可以在任何ip下账号密码登录"></a>设置我们mysql可以在任何ip下账号密码登录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;我们自己msql密码&apos; WITH GRANT OPTION;</div></pre></td></tr></table></figure>
<h4 id="刷新权限"><a href="#刷新权限" class="headerlink" title="刷新权限"></a>刷新权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FLUSH PRIVILEGES;</div></pre></td></tr></table></figure>
<h4 id="在Mac上的「Sequel-pro」测试一下"><a href="#在Mac上的「Sequel-pro」测试一下" class="headerlink" title="在Mac上的「Sequel pro」测试一下"></a>在Mac上的「Sequel pro」测试一下</h4><p><img src="http://ov0vwamhh.bkt.clouddn.com/2017-12-06-Jietu20171206-195558.jpg" alt=""><br><img src="http://ov0vwamhh.bkt.clouddn.com/2017-12-06-Jietu20171206-195350.jpg" alt=""></p>
<p>阿西吧!终于连接上了,有没有,好激动有没有</p>
<h2 id="如何将本地文件上传到云服务器呢"><a href="#如何将本地文件上传到云服务器呢" class="headerlink" title="如何将本地文件上传到云服务器呢?"></a>如何将本地文件上传到云服务器呢?</h2><h3 id="移动到本地文件目录下"><a href="#移动到本地文件目录下" class="headerlink" title="移动到本地文件目录下"></a>移动到本地文件目录下</h3><p>cd file</p>
<p>scp index.css root@云服务器公网IP地址:服务器文件目录</p>
<p>回车输入密码就可以上传了</p>
<h3 id="移动整个文件目录到云服务器指定目录"><a href="#移动整个文件目录到云服务器指定目录" class="headerlink" title="移动整个文件目录到云服务器指定目录"></a>移动整个文件目录到云服务器指定目录</h3><p>scp -r images root@云服务器公网IP地址:服务器文件目录</p>
<h3 id="移动多个文件到云服务器指定目录"><a href="#移动多个文件到云服务器指定目录" class="headerlink" title="移动多个文件到云服务器指定目录"></a>移动多个文件到云服务器指定目录</h3><p>scp index.html index.css project1.html project2.html root@139.196.40.14:服务器文件目录<br>多个文件名之间用空格分开。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/14/Kotlin进阶三/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/14/Kotlin进阶三/" itemprop="url">Kotlin进阶(三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-14T14:10:53+08:00">
                2018-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本节介绍使用Kotlin委托适配器和数据类</p>
</blockquote>
<h2 id="本节学到的东西"><a href="#本节学到的东西" class="headerlink" title="本节学到的东西"></a>本节学到的东西</h2><ul>
<li>初始化构造函数</li>
<li>对象表达式</li>
<li>单例表达式</li>
<li>数据类</li>
<li>范围</li>
<li>List &amp; Lambdas表达式</li>
</ul>
<h2 id="创建NewsAdapter"><a href="#创建NewsAdapter" class="headerlink" title="创建NewsAdapter"></a>创建NewsAdapter</h2><p>我们的适配器将有一个委托适配器列表，那些将负责知道如何inflate并返回RecyclerView中的特定视图.一般想法是接收一个ViewType项目列表，并根据此ViewType获取相应的委托适配器来inflate并填充该项目的视图.该项目将用作参数传递给委托适配器，以便该项目可用于为此视图提取特定数据.</p>
<h3 id="ViewType"><a href="#ViewType" class="headerlink" title="ViewType"></a>ViewType</h3><p>这是我们将用于我们要在RecyclerView中显示的项目的接口.每个项目必须实现这个接口，以便我们可以向每个项目询问ViewType类型（int值）并搜索相应的委托适配器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">interface ViewType &#123;</div><div class="line">    fun getViewType(): Int</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在我们的适配器中，我们将有一个名为items的ViewType列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">private var items: ArrayList&lt;ViewType&gt;</div></pre></td></tr></table></figure>
<p>在这里，我们将存储新闻和加载项目。我们的新闻模型将从ViewType扩展，我们将在本地为加载item创建一个新item.</p>
<h3 id="给我们的Recycle-View添加一个loadingView"><a href="#给我们的Recycle-View添加一个loadingView" class="headerlink" title="给我们的Recycle View添加一个loadingView."></a>给我们的Recycle View添加一个loadingView.</h3><p><img src="https://cdn-images-1.medium.com/max/800/1*tbMqbIcySrv9u3KATKQfNw.png" alt=""></p>
<ul>
<li>ViewType 的Type:这将是一个integer值（如ID），以将我们的ViewType与委托适配器（AdapterConstants.LOADING）相匹配</li>
<li>ViewType 的Item:这将是一个实现ViewType接口并返回ViewType类型（ID）的对象。这将允许我们将这个item插入到items列表中，并告诉适配器呈现这个视图</li>
<li>Loading Delegate Adapter:负责将视图inflating并将其返回给我们的NewsAdapter。</li>
</ul>
<h3 id="Loading-Delegate-Adapter-实现"><a href="#Loading-Delegate-Adapter-实现" class="headerlink" title="Loading Delegate Adapter 实现"></a>Loading Delegate Adapter 实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class LoadingDelegateAdapter : ViewTypeDelegateAdapter &#123;</div><div class="line"></div><div class="line">    override fun onCreateViewHolder(parent: ViewGroup) = TurnsViewHolder(parent)</div><div class="line"></div><div class="line">    override fun onBindViewHolder(holder: RecyclerView.ViewHolder, item: ViewType) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    class TurnsViewHolder(parent: ViewGroup) : RecyclerView.ViewHolder(</div><div class="line">            parent.inflate(R.layout.news_item_loading)) &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>正如您所看到的，我们通过扩展另一个名为“ViewTypeDelegateAdapter”的接口来创建Delegate Adapter.这个接口允许我们拥有一个delegated adapters的通用列表，并调用这些方法，而不需要我们的NewsAdapter知道具体的delegated adapters实现.一种方法来创建ViewHolder，另一种方法绑定它</p>
<h3 id="使用Delegate-Adapter绑定ViewType类型"><a href="#使用Delegate-Adapter绑定ViewType类型" class="headerlink" title="使用Delegate Adapter绑定ViewType类型"></a>使用Delegate Adapter绑定ViewType类型</h3><p>我们将使用map来将ViewType类型与委托适配器绑定（这将在NewsAdapter类中进行）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">private var delegateAdapters = SparseArrayCompat&lt;ViewTypeDelegateAdapter&gt;()</div><div class="line">init &#123;</div><div class="line">    delegateAdapters.put(AdapterConstants.LOADING, LoadingDelegateAdapter())</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="初始化构造方法"><a href="#初始化构造方法" class="headerlink" title="初始化构造方法"></a>初始化构造方法</h3><p>init是Kotlin中为类的构造函数（在这种情况下为NewsAdapter）中的保留字，在此我们将初始化此映射，并将每个ViewType类型与相应的委托适配器相加。</p>
<p>为了在Kotlin中创建一个新对象，你不需要使用“new”关键字。</p>
<h3 id="加载ViewType-Item"><a href="#加载ViewType-Item" class="headerlink" title="加载ViewType Item"></a>加载ViewType Item</h3><p>让我们创建我们的 Loading item，这个item将帮助我们将加载view渲染到我们将其插入到项目列表中的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">private val loadingItem = object : ViewType &#123;</div><div class="line">    override fun getViewType() : Int &#123;</div><div class="line">        return AdapterConstants.LOADING</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此外，默认添加这个项目作为第一个要在列表中呈现的项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">init &#123;</div><div class="line">    delegateAdapters.put(...)</div><div class="line">    items = ArrayList()</div><div class="line">    items.add(loadingItem)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Object-表达式"><a href="#Object-表达式" class="headerlink" title="Object 表达式"></a>Object 表达式</h3><p>在Kotlin中，你有一种叫做“对象表达式”的东西，其工作方式与Java中的匿名内部类相似，并允许你创建一个对象，而不必为它明确声明一个新的子类.在这种情况下，我们使用它来定义我们的loadingItem而不创建新的类。语法非常直观，您可以看到我们正在从ViewType进行扩展并实现所需的接口。</p>
<h3 id="Single表达式"><a href="#Single表达式" class="headerlink" title="Single表达式"></a>Single表达式</h3><p>getViewType（）方法在主体内只有一个表达式函数。在Kotlin中，我们可以利用这一点并转换此方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">override fun getViewType() : Int &#123;</div><div class="line">    return AdapterConstants.LOADING</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>转换为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">override fun getViewType() = AdapterConstants.LOADING</div></pre></td></tr></table></figure>
<p>这就像我们正在将AdapterConstants.LOADING的值分配给一个函数。这是做同样的简短方法，它更简洁。你也不必指定返回值类型，因为它可以通过上下文来推断。所以这就是它现在的样子.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">private val loadingItem = object : ViewType &#123;</div><div class="line">    override fun getViewType() = AdapterConstants.LOADING</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h3><p><a href="https://github.com/juanchosaravia/KedditBySteps/commit/ecc2546b5a0001149f9fe0ca3295d31ecd9ac542" target="_blank" rel="external">以上的代码在这次提交中</a></p>
<h2 id="带有数据类的新闻项目"><a href="#带有数据类的新闻项目" class="headerlink" title="带有数据类的新闻项目"></a>带有数据类的新闻项目</h2><p>在创建我们的News委托适配器并配置NewsAdapter以接收新闻列表之前，我们需要我们的UI对象来表示每条新闻。在Java中，我们通常会像这样创建一个类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">public class RedditNewsItem &#123;</div><div class="line"></div><div class="line">    private String author;</div><div class="line">    private String title;</div><div class="line"></div><div class="line">    public MyNews(String author, String title) &#123;</div><div class="line">        this.author = author;</div><div class="line">        this.title = title;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getAuthor() &#123;</div><div class="line">        return author;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setAuthor(String author) &#123;</div><div class="line">        this.author = author;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getTitle() &#123;</div><div class="line">        return title;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setTitle(String title) &#123;</div><div class="line">        this.title = title;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Kotlin来帮助我们使用一种称为“数据类”的新类类型，它为您带来了很多好处，对于相同的示例，它看起来像这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data class RedditNewsItem(var author: String, var title: String)</div></pre></td></tr></table></figure>
<p>通过这个简单的线条，您可以完成与之前的Java代码相同的工作，这意味着作者和标题拥有自己的getter和setter，并且它需要一个带有这两个元素的构造函数.这真是太棒了！可是等等！如果您参加此数据class，您仍可获得更多方便的地方，您可免费获得此class：</p>
<ul>
<li>equals/hashCode</li>
<li>toString()包含所有的属性</li>
<li>copy（）方法可以轻松copy对象的副本</li>
<li>和其他有用的方法，我们不会在这里看到，但你可以在<a href="https://kotlinlang.org/docs/reference/data-classes.html" target="_blank" rel="external">官方页面</a>看到更多.</li>
</ul>
<h3 id="Commit-创建-Data-Class"><a href="#Commit-创建-Data-Class" class="headerlink" title="Commit: 创建 Data Class"></a>Commit: 创建 Data Class</h3><p><a href="https://github.com/juanchosaravia/KedditBySteps/commit/3c200af22879e3ec16aaa963ca38ec7e97659971" target="_blank" rel="external">点击这里</a></p>
<h2 id="创建NewsDelegateAdapter"><a href="#创建NewsDelegateAdapter" class="headerlink" title="创建NewsDelegateAdapter"></a>创建NewsDelegateAdapter</h2><p>现在我们创建了新闻项目，我们需要我们的委托适配器负责创建视图。在这里，您可以预览我们需要什么</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*xXiI1n-jXkV2oEjGuUTTXw.png" alt=""></p>
<ul>
<li>显示一些文字，如标题，作者，评论等</li>
<li>一张图片，我们要使用Picasso（参见下面的提交中的build.gradle文件）</li>
<li>扩展功能以这种方式显示时间</li>
</ul>
<h3 id="Picasso的扩展功能"><a href="#Picasso的扩展功能" class="headerlink" title="Picasso的扩展功能"></a>Picasso的扩展功能</h3><p>允许我使ImageView直接加载它的图像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fun ImageView.loadImg(imageUrl: String) &#123;</div><div class="line">    if (TextUtils.isEmpty(imageUrl)) &#123;</div><div class="line">        Picasso.with(context).load(R.mipmap.ic_launcher).into(this)</div><div class="line">    &#125; else &#123;</div><div class="line">        Picasso.with(context).load(imageUrl).into(this)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Time的扩展方法"><a href="#Time的扩展方法" class="headerlink" title="Time的扩展方法"></a>Time的扩展方法</h3><p>我们将从Reddit接收长格式的评论时间，所以我们在这里做的是将一个Long类型转换为像“3天1分钟前”格式的字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun Long.getFriendlyTime(): String &#123;</div><div class="line">    // logic here...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>检出名为“TimeExt.kt”的文件以查看代码。当然，它可以改进，但为了这个例子的目的，它是完美的:)</p>
<h3 id="新闻视图的Android扩展程序"><a href="#新闻视图的Android扩展程序" class="headerlink" title="新闻视图的Android扩展程序"></a>新闻视图的Android扩展程序</h3><p>检出文件“NewsDelegateAdapter.kt”，你会看到我们也在使用Android扩展来展示这个视图（就像我们用NewsFragment做的那样）但是在这种情况下，我们在布局名称的末尾添加了一个名为“view”的额外值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import kotlinx.android.synthetic.main.news_item.view.*</div></pre></td></tr></table></figure>
<p>这是Android扩展允许您仍然将视图与代码绑定而不在Activity或Fragment（如本例中）的上下文中的方式</p>
<h2 id="更新NewsAdapter以接收新闻"><a href="#更新NewsAdapter以接收新闻" class="headerlink" title="更新NewsAdapter以接收新闻"></a>更新NewsAdapter以接收新闻</h2><p>让我们修改我们的NewsAdapter，以获得新闻和加载委托适配器显示的模拟新闻列表<br><img src="https://cdn-images-1.medium.com/max/800/1*jrykirwOSKgQ3KkgRmzqYw.png" alt=""></p>
<h3 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h3><p>Kotlin允许您通过使用如下的表达式以简单的方式创建一系列数字（Int，Long和Char类型）：“1..10”，<br>这将返回一个IntRange（因为我们在本例中使用了Ints）.IntRange从IntProgression扩展并实现Iterable。由于这个原因，我们可以迭代我们有的范围，在这种情况下从1到10来创建我们的模拟数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for (i in 1..10) &#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="mutableListOf"><a href="#mutableListOf" class="headerlink" title="mutableListOf"></a>mutableListOf</h3><p>这是一个Kotlin函数，它返回一个MutableList，一个可以修改的列表，在这种情况下，它将在本地存储适配器的模拟新闻：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val news = mutableListOf&lt;RedditNewsItem&gt;()</div></pre></td></tr></table></figure>
<h3 id="Lists-方法-amp-Lambdas"><a href="#Lists-方法-amp-Lambdas" class="headerlink" title="Lists 方法 &amp; Lambdas"></a>Lists 方法 &amp; Lambdas</h3><p>我创建了一个方法，稍后我将使用它来保存新闻，当我们处于Orientation Change事件的中间时，但是我想向您展示使用list来过滤和映射（转换）每个项目是多么容易从一个列表到另一个列表。</p>
<p>在我们的代码中，我们有一个名为“getNews”的方法，它返回RedditNewsItems列表。为了过滤和转换我们的项目（一个ViewType列表），我们将这样做</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fun getNews(): List&lt;RedditNewsItem&gt; &#123;</div><div class="line">    return items</div><div class="line">            .filter &#123; it.getViewType() == AdapterConstants.NEWS &#125;</div><div class="line">            .map &#123; it as RedditNewsItem &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>每个列表都有一些有用的功能，例如“filter”，在这种情况下，它允许我们迭代列表并过滤（排除）不适用某些条件的项目。在我们的物品清单中，我们有ViewTypes，所以我们可以拥有新闻物品或加载物品，使用此过滤功能，我们确保只返回那些是新闻物品的物品。</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>另一个很棒的功能是“map”来转换列表中的项目。在这种情况下，我们将一个ViewType对象转换为RedditNewsItem，但我们也可以创建并返回新的对象</p>
<h3 id="Lambdas"><a href="#Lambdas" class="headerlink" title="Lambdas"></a>Lambdas</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.map &#123; it as RedditNewsItem &#125;</div></pre></td></tr></table></figure>
<p>Map并不是另一种认为接受作为第一个参数的函数，但Kotlin使它变得非常棒，因为它允许您排除括号并在函数名称旁边定义代码块.最后，这个代码块将成为函数所需的第一个参数，代码块是着名的Lambda表达式，这是一个未声明但作为表达式立即传递的函数</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我知道我花了更多的时间来解释委托适配器模式，而不是Kotlin的特定功能，但是我确定我认为这种模式确实是一种非常好的模式，值得使用Kotlin代码但我希望你已经用这个新代码学习了新的Kotlin特性。此外，我们的代码变得越来越好（或在列表中显示UI中的东西，哈哈）。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/07/初识微信小程序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/07/初识微信小程序/" itemprop="url">初识微信小程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-07T19:09:11+08:00">
                2018-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/21/Android系统广播总结篇/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/21/Android系统广播总结篇/" itemprop="url">Android系统广播总结篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-21T11:20:19+08:00">
                2017-12-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>系统广播意图</th>
<th>广播作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Intent.ACTION_AIRPLANE_MODE_CHANGED</td>
<td>关闭或打开飞行模式时的广播</td>
</tr>
<tr>
<td>Intent.ACTION_BATTERY_CHANGED</td>
<td>充电状态，或者电池的电量发生变化</td>
</tr>
<tr>
<td>Intent.ACTION_BATTERY_LOW</td>
<td>表示电池电量低</td>
</tr>
<tr>
<td>Intent.ACTION_BATTERY_OKAY</td>
<td>表示电池电量充足，即从电池电量低变化到饱满时会发出广播</td>
</tr>
<tr>
<td>Intent.ACTION_BOOT_COMPLETED</td>
<td>在系统启动完成后，这个动作被广播一次（只有一次</td>
</tr>
<tr>
<td>Intent.ACTION_CAMERA_BUTTON</td>
<td>按下照相时的拍照按键(硬件按键)时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_CLOSE_SYSTEM_DIALOGS</td>
<td>当屏幕超时进行锁屏时,当用户按下电源按钮,长按或短按(不管有没跳出话框)，进行锁屏时,android系统都会广播此Action消息</td>
</tr>
<tr>
<td>Intent.ACTION_CONFIGURATION_CHANGED</td>
<td>设备当前设置被改变时发出的广播(包括的改变:界面语言，设备方向，等，请参考Configuration.java)</td>
</tr>
<tr>
<td>Intent.ACTION_DATE_CHANGED</td>
<td>设备日期发生改变时会发出此广播</td>
</tr>
<tr>
<td>Intent.ACTION_DEVICE_STORAGE_LOW</td>
<td>设备内存不足时发出的广播,此广播只能由系统使用，其它APP不可用</td>
</tr>
<tr>
<td>Intent.ACTION_DEVICE_STORAGE_OK</td>
<td>设备内存从不足到充足时发出的广播,此广播只能由系统使用，其它APP不可用</td>
</tr>
<tr>
<td>Intent.ACTION_HEADSET_PLUG</td>
<td>在耳机口上插入耳机时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_INPUT_METHOD_CHANGED</td>
<td>改变输入法时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_LOCALE_CHANGED</td>
<td>设备当前区域设置已更改时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_BAD_REMOVAL</td>
<td>未正确移除SD卡(正确移除SD卡的方法:设置–SD卡和设备内存–卸载SD卡)，但已把SD卡取出来时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_BUTTON</td>
<td>按下”Media Button” 按键时发出的广播,假如有”Media Button”按键的话(硬件按键)</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_CHECKING</td>
<td>插入外部储存装置，比如SD卡时，系统会检验SD卡，此时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_EJECT</td>
<td>已拔掉外部大容量储存设备发出的广播（比如SD卡，或移动硬盘）,不管有没有正确卸载都会发出此广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_MOUNTED</td>
<td>插入SD卡并且已正确安装（识别）时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_REMOVED</td>
<td>外部储存设备已被移除，不管有没正确卸载,都会发出此广播</td>
</tr>
<tr>
<td>Intent.ACTION_MEDIA_SCANNER_FINISHED</td>
<td>已经扫描完介质的一个目录</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_ADDED</td>
<td>成功的安装APK之后</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_CHANGED</td>
<td>一个已存在的应用程序包已经改变，包括包名</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_DATA_CLEARED</td>
<td>清除一个应用程序的数据时发出的广播(在设置－－应用管理－－选中某个应用，之后点清除数据时</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_INSTAL</td>
<td>触发一个下载并且完成安装时发出的广播，比如在电子市场里下载应用</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_REMOVED</td>
<td>成功的删除某个APK之后发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_REPLACED</td>
<td>替换一个现有的安装包时发出的广播（不管现在安装的APP比之前的新还是旧，都会发出此广播</td>
</tr>
<tr>
<td>Intent.ACTION_PACKAGE_RESTARTED</td>
<td>用户重新开始一个包，包的所有进程将被杀死，所有与其联系的运行时间状态应该被移除，包括包名（重新开始包程序不能接收到这个广播）</td>
</tr>
<tr>
<td>Intent.ACTION_POWER_CONNECTED</td>
<td>插上外部电源时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_POWER_DISCONNECTED</td>
<td>已断开外部电源连接时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_REBOOT</td>
<td>重启设备时的广播</td>
</tr>
<tr>
<td>Intent.ACTION_SCREEN_OFF</td>
<td>屏幕被关闭之后的广播</td>
</tr>
<tr>
<td>Intent.ACTION_SCREEN_ON</td>
<td>屏幕被打开之后的广播</td>
</tr>
<tr>
<td>Intent.ACTION_SHUTDOWN</td>
<td>关闭系统时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_TIMEZONE_CHANGED</td>
<td>时区发生改变时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_TIME_CHANGED</td>
<td>时间被设置时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_TIME_TICK</td>
<td>当前时间改变，每分钟都发送，不能通过组件声明来接收，只有通过Context.registerReceiver()方法来注册</td>
</tr>
<tr>
<td>Intent.ACTION_UID_REMOVED</td>
<td>一个用户ID已经从系统中移除发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_UMS_CONNECTED</td>
<td>设备已进入USB大容量储存状态时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_UMS_DISCONNECTED</td>
<td>设备已从USB大容量储存状态转为正常状态时发出的广播</td>
</tr>
<tr>
<td>Intent.ACTION_WALLPAPER_CHANGED</td>
<td>设备墙纸已改变时发出的广播</td>
</tr>
</tbody>
</table>
<blockquote>
<p>以上就是我总结的android系统一些操作,所发出的广播,有些广播是需要申请权限的,例如网路状态改变的广播,希望可以帮到你</p>
</blockquote>
<hr>
<h2 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h2><blockquote>
<p>本人技术有限,还有很多不完美的地方,欢迎指出.(写作不易,谢谢您的star支持)</p>
</blockquote>
<ul>
<li>QQ: 152046273</li>
<li>Email: yukuoyuan@hotmail.com</li>
<li><a href="http://blog.csdn.net/easkshark" target="_blank" rel="external">CSDN博客地址</a></li>
<li><a href="https://yukuoyuan.github.io/archives/" target="_blank" rel="external">Github博客地址</a></li>
<li><a href="https://github.com/yukuoyuan" target="_blank" rel="external">Github地址</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/AndroidShortcuts使用详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/AndroidShortcuts使用详解/" itemprop="url">AndroidShortcuts使用详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T11:18:50+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>7.1的时候出现了一个长按图标出现的功能列表的效果,类似于2015年ios的3dTouch功能.奈何国产,大家懂得,到目前用了一加五才可以感受这个功能的好处.</p>
</blockquote>
<h1 id="效果图来了"><a href="#效果图来了" class="headerlink" title="效果图来了"></a>效果图来了</h1><p><img src="http://img.blog.csdn.net/20171219112926915?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h1 id="shortcuts的介绍"><a href="#shortcuts的介绍" class="headerlink" title="shortcuts的介绍"></a>shortcuts的介绍</h1><blockquote>
<p>其中App Shortcuts是指在桌面长按app图标而出现的快捷方式, 可以为你的app的关键功能添加更快速的入口而不用先打开app,点击快捷方式可以访问应用功能, 并且这种快捷方式也可以被拖拽到桌面单独放置, 变成单独的桌面快捷方式.</p>
</blockquote>
<h2 id="有两种shortcuts"><a href="#有两种shortcuts" class="headerlink" title="有两种shortcuts:"></a>有两种shortcuts:</h2><ul>
<li>静态的: 在xml中定义, 适用于一些通用的动作.</li>
<li>动态的: 由ShortcutManager发布, 可以根据用户的行为或者偏好添加, 可以动态更新.</li>
</ul>
<h2 id="数量"><a href="#数量" class="headerlink" title="数量"></a>数量</h2><p>每一个应用目前最多可以有5个shortcuts(静态 + 动态)</p>
<h2 id="运行条件"><a href="#运行条件" class="headerlink" title="运行条件"></a>运行条件</h2><p>应用添加App Shortcuts是Android 7.1(API 25)的API, 所以只能在Android 7.1的设备上显示, 同时需要launcher支持, 比如Pixel launcher(Pixel设备的默认launcher), Now launcher(Nexus设备上的launcher)现在就支持, 其他launcher也可以提供支持.</p>
<h1 id="静态的shortcuts的使用"><a href="#静态的shortcuts的使用" class="headerlink" title="静态的shortcuts的使用"></a>静态的shortcuts的使用</h1><h3 id="清单文件配置"><a href="#清单文件配置" class="headerlink" title="清单文件配置"></a>清单文件配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;activity android:name=&quot;.MainActivity&quot;&gt;</div><div class="line">           &lt;intent-filter&gt;</div><div class="line">               &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;</div><div class="line"></div><div class="line">               &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</div><div class="line">           &lt;/intent-filter&gt;</div><div class="line">           &lt;!--添加支持shortcuts--&gt;</div><div class="line">           &lt;meta-data</div><div class="line">               android:name=&quot;android.app.shortcuts&quot;</div><div class="line">               android:resource=&quot;@xml/shortcuts&quot; /&gt;</div><div class="line">       &lt;/activity&gt;</div></pre></td></tr></table></figure>
<h3 id="在res目录下添加xml文件夹-并新建文件shortcuts"><a href="#在res目录下添加xml文件夹-并新建文件shortcuts" class="headerlink" title="在res目录下添加xml文件夹,并新建文件shortcuts"></a>在res目录下添加xml文件夹,并新建文件shortcuts</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;shortcuts xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">    &lt;shortcut</div><div class="line">        android:icon=&quot;@drawable/add&quot;</div><div class="line">        android:shortcutId=&quot;add_website&quot;</div><div class="line">        android:shortcutLongLabel=&quot;@string/add_new_website&quot;</div><div class="line">        android:shortcutShortLabel=&quot;@string/add_new_website_short&quot;&gt;</div><div class="line">        &lt;!--最左侧或者添加桌面后显示的图标--&gt;</div><div class="line">        &lt;!--id标识--&gt;</div><div class="line">        &lt;!--长按显示的文字--&gt;</div><div class="line">        &lt;!--添加到桌面显示的文字--&gt;</div><div class="line">        &lt;intent</div><div class="line">            android:action=&quot;cn.yky.test.ADD_WEBSITE&quot;</div><div class="line">            android:targetClass=&quot;cn.yky.test.MainActivity&quot;</div><div class="line">            android:targetPackage=&quot;cn.yky.test&quot; /&gt;</div><div class="line">        &lt;!--第一个是意图标识--&gt;</div><div class="line">        &lt;!--第二个参数是希望打开的界面--&gt;</div><div class="line">        &lt;!--希望打开界面的包名--&gt;</div><div class="line">    &lt;/shortcut&gt;</div><div class="line">&lt;/shortcuts&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>注意,shortcutLongLabel和shortcutShortLabel,不可以直接引用文字,不然会报错.!!!谁加谁知道.经过以上的步骤之后,就可以看到最开始的效果图了!.</p>
</blockquote>
<h1 id="动态添加"><a href="#动态添加" class="headerlink" title="动态添加"></a>动态添加</h1><blockquote>
<p>动态的shortcuts可以在用户使用app的过程中构建, 更新, 或者删除.</p>
</blockquote>
<h2 id="ShortcutManager"><a href="#ShortcutManager" class="headerlink" title="ShortcutManager"></a>ShortcutManager</h2><ul>
<li>设置或者新增 setDynamicShortcuts; addDynamicShortcuts;</li>
<li>修改 updateShortcuts;</li>
<li>删除 removeDynamicShortcuts; removeAllDynamicShortcuts; </li>
</ul>
<h3 id="动态添加三个"><a href="#动态添加三个" class="headerlink" title="动态添加三个"></a>动态添加三个</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N_MR1) &#123;</div><div class="line">            mShortcutManager = getSystemService(ShortcutManager.class);</div><div class="line">            getNewShortcutInfo();</div><div class="line">        &#125;</div><div class="line">        </div><div class="line"> /**</div><div class="line">     * 动态添加三个</div><div class="line">     */</div><div class="line">    @RequiresApi(api = Build.VERSION_CODES.N_MR1)</div><div class="line">    private void getNewShortcutInfo() &#123;</div><div class="line">        ShortcutInfo shortcut = new ShortcutInfo.Builder(this, &quot;id1&quot;)</div><div class="line">                .setShortLabel(&quot;Web site&quot;)</div><div class="line">                .setLongLabel(&quot;第一个&quot;)</div><div class="line">                .setIcon(Icon.createWithResource(this, R.drawable.link))</div><div class="line">                .setIntent(new Intent(Intent.ACTION_VIEW,</div><div class="line">                        Uri.parse(&quot;https://www.baidu.com/&quot;)))</div><div class="line">                .build();</div><div class="line">        ShortcutInfo shortcut2 = new ShortcutInfo.Builder(this, &quot;id2&quot;)</div><div class="line">                .setShortLabel(&quot;Web site&quot;)</div><div class="line">                .setLongLabel(&quot;第二个&quot;)</div><div class="line">                .setIcon(Icon.createWithResource(this, R.drawable.link))</div><div class="line">                .setIntent(new Intent(Intent.ACTION_VIEW,</div><div class="line">                        Uri.parse(&quot;https://www.csdn.com/&quot;)))</div><div class="line">                .build();</div><div class="line">        ShortcutInfo shortcut3 = new ShortcutInfo.Builder(this, &quot;id3&quot;)</div><div class="line">                .setShortLabel(&quot;Web site&quot;)</div><div class="line">                .setLongLabel(&quot;第三个&quot;)</div><div class="line">                .setIcon(Icon.createWithResource(this, R.drawable.link))</div><div class="line">                .setIntent(new Intent(Intent.ACTION_VIEW,</div><div class="line">                        Uri.parse(&quot;https://www.github.com/&quot;)))</div><div class="line">                .build();</div><div class="line">        mShortcutManager.setDynamicShortcuts(Arrays.asList(shortcut, shortcut2, shortcut3));</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="http://img.blog.csdn.net/20171219142658399?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<blockquote>
<p>依次类推,就可以动态增删改我们的快捷方式了.虽然你想用,但是国产手机估计还得一年以内的时间能普及到吧.</p>
</blockquote>
<hr>
<h2 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h2><blockquote>
<p>本人技术有限,还有很多不完美的地方,欢迎指出.(写作不易,谢谢您的star支持)</p>
</blockquote>
<ul>
<li>QQ:152046273</li>
<li>Email:yukuoyuan@hotmail.com</li>
<li><a href="http://blog.csdn.net/easkshark" target="_blank" rel="external">CSDN博客地址</a></li>
<li><a href="https://yukuoyuan.github.io/archives/" target="_blank" rel="external">Github博客地址</a></li>
<li><a href="https://github.com/yukuoyuan" target="_blank" rel="external">Github地址</a></li>
</ul>
<p><div id="container"></div></p>
<p><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"></p>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: 'location.href', // 可选。默认为 location.href
  owner: 'yukuoyuan',
  repo: 'yukuoyuan.github.io',
  oauth: {
    client_id: '305697cd991bc18f3231',
    client_secret: '1c1040fcd1151b2eeff8287dafd6ba00378db098',
  },
})
gitment.render('container')
</script>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/18/Toolbar使用一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/18/Toolbar使用一/" itemprop="url">Toolbar使用一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-18T14:47:31+08:00">
                2017-12-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>很早就想使用toolbar控件来代替自己定义的一些布局,然而从业之后的公司,都希望ios和android的设计风格一致,奈何从未有幸使用,今天就先写个demo,纪念一下自己的小情怀</p>
</blockquote>
<h2 id="引用配置-40-project下的build-gradle-41"><a href="#引用配置-40-project下的build-gradle-41" class="headerlink" title="引用配置&#40;project下的build.gradle&#41;"></a>引用配置&#40;project下的build.gradle&#41;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compile &apos;com.android.support:appcompat-v7:25.3.1&apos;</div></pre></td></tr></table></figure>
<h2 id="布局中使用"><a href="#布局中使用" class="headerlink" title="布局中使用"></a>布局中使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.v7.widget.Toolbar</div><div class="line">android:id=&quot;@+id/tb_main&quot;</div><div class="line">android:layout_width=&quot;match_parent&quot;</div><div class="line">android:layout_height=&quot;wrap_content&quot;</div><div class="line">android:background=&quot;@color/colorPrimary&quot;&gt;</div><div class="line"></div><div class="line">&lt;/android.support.v7.widget.Toolbar&gt;</div></pre></td></tr></table></figure>
<h2 id="Activity代码块"><a href="#Activity代码块" class="headerlink" title="Activity代码块"></a>Activity代码块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">private Toolbar tbMain;</div><div class="line"></div><div class="line">  @Override</div><div class="line">  protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">      super.onCreate(savedInstanceState);</div><div class="line">      setContentView(R.layout.activity_main);</div><div class="line">      initView();</div><div class="line">      tbMain = (Toolbar) findViewById(R.id.tb_main);</div><div class="line">      /**</div><div class="line">       * 设置最左侧的按钮</div><div class="line">       */</div><div class="line">      tbMain.setNavigationIcon(R.mipmap.ic_launcher_round);</div><div class="line">      /**</div><div class="line">       * 设置logo</div><div class="line">       */</div><div class="line">      tbMain.setLogo(R.mipmap.ic_launcher);</div><div class="line">      /**</div><div class="line">       * 设置大标题</div><div class="line">       */</div><div class="line">      tbMain.setTitle(&quot;标题&quot;);</div><div class="line">      /**</div><div class="line">       * 设置大标题的颜色</div><div class="line">       */</div><div class="line">      tbMain.setTitleTextColor(Color.WHITE);</div><div class="line">      /**</div><div class="line">       * 设置小标题</div><div class="line">       */</div><div class="line">      tbMain.setSubtitle(&quot;小标题&quot;);</div><div class="line">      /**</div><div class="line">       * 设置小标题的颜色</div><div class="line">       */</div><div class="line">      tbMain.setSubtitleTextColor(Color.WHITE);</div><div class="line">      setSupportActionBar(tbMain);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  private void initView() &#123;</div><div class="line">      tbMain = (Toolbar) findViewById(R.id.tb_main);</div><div class="line">  &#125;</div><div class="line">/**</div><div class="line">*三个点点击之后弹出的弹窗菜单</div><div class="line">*/</div><div class="line">  @Override</div><div class="line">  public boolean onCreateOptionsMenu(Menu menu) &#123;</div><div class="line">      getMenuInflater().inflate(R.menu.menu_main, menu);</div><div class="line">      return true;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20171219092324603?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="效果图"></p>
<blockquote>
<p>不完美的地方就是三个点的颜色是黑色的,与我们的主题格格不入,怎么办呢,修改它</p>
<h2 id="修改toolbar的style"><a href="#修改toolbar的style" class="headerlink" title="修改toolbar的style"></a>修改toolbar的style</h2></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;!-- ToolBar菜单样式 --&gt;</div><div class="line">  &lt;style name=&quot;ToolbarTheme&quot; parent=&quot;@style/AppTheme&quot;&gt;</div><div class="line">      &lt;item name=&quot;android:textColorSecondary&quot;&gt;@android:color/white&lt;/item&gt;</div><div class="line">  &lt;/style&gt;</div></pre></td></tr></table></figure>
<h2 id="布局引用"><a href="#布局引用" class="headerlink" title="布局引用"></a>布局引用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.v7.widget.Toolbar</div><div class="line">       android:id=&quot;@+id/tb_main&quot;</div><div class="line">       android:layout_width=&quot;match_parent&quot;</div><div class="line">       android:layout_height=&quot;wrap_content&quot;</div><div class="line">       android:background=&quot;@color/colorPrimary&quot;</div><div class="line">       app:theme=&quot;@style/ToolbarTheme&quot;&gt;</div><div class="line"></div><div class="line">   &lt;/android.support.v7.widget.Toolbar&gt;</div></pre></td></tr></table></figure>
<h2 id="效果图-1"><a href="#效果图-1" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20171219093238752?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="再看弹出的菜单的位置单的样式-遮挡了toolbar-不爽修改它"><a href="#再看弹出的菜单的位置单的样式-遮挡了toolbar-不爽修改它" class="headerlink" title="再看弹出的菜单的位置单的样式,遮挡了toolbar,不爽修改它"></a>再看弹出的菜单的位置单的样式,遮挡了toolbar,不爽修改它</h2><p><img src="http://img.blog.csdn.net/20171219093834183?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="修改样式"><a href="#修改样式" class="headerlink" title="修改样式"></a>修改样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;ToolbarPopupTheme&quot; parent=&quot;@style/ThemeOverlay.AppCompat.Dark&quot;&gt;</div><div class="line">       &lt;!--修改弹窗的背景颜色--&gt;</div><div class="line">       &lt;item name=&quot;android:colorBackground&quot;&gt;@android:color/black&lt;/item&gt;</div><div class="line">       &lt;item name=&quot;actionOverflowMenuStyle&quot;&gt;@style/OverflowMenuStyle&lt;/item&gt;</div><div class="line">   &lt;/style&gt;</div><div class="line"></div><div class="line">   &lt;style name=&quot;OverflowMenuStyle&quot; parent=&quot;Widget.AppCompat.Light.PopupMenu.Overflow&quot;&gt;</div><div class="line">       &lt;item name=&quot;overlapAnchor&quot;&gt;false&lt;/item&gt;  &lt;!--把该属性改为false即可使menu位置位于toolbar之下--&gt;</div><div class="line">   &lt;/style&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.v7.widget.Toolbar</div><div class="line">       android:id=&quot;@+id/tb_main&quot;</div><div class="line">       android:layout_width=&quot;match_parent&quot;</div><div class="line">       android:layout_height=&quot;wrap_content&quot;</div><div class="line">       android:background=&quot;@color/colorPrimary&quot;</div><div class="line">       app:popupTheme=&quot;@style/ToolbarPopupTheme&quot;</div><div class="line">       app:theme=&quot;@style/ToolbarTheme&quot;&gt;</div><div class="line"></div><div class="line">   &lt;/android.support.v7.widget.Toolbar&gt;</div></pre></td></tr></table></figure>
<h2 id="效果图-2"><a href="#效果图-2" class="headerlink" title="效果图"></a>效果图</h2><p><img src="http://img.blog.csdn.net/20171219094551234?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRWFza1NoYXJr/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="很重要的点击事件的监听"><a href="#很重要的点击事件的监听" class="headerlink" title="很重要的点击事件的监听"></a>很重要的点击事件的监听</h2><blockquote>
<p>需要注意的是</p>
</blockquote>
<ul>
<li>Activity一定要继承AppCompatActivity</li>
<li>在menu里边一定要设置id</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">   public boolean onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">       switch (item.getItemId()) &#123;</div><div class="line">        case android.R.id.home:</div><div class="line">        //最左侧的按钮的点击事件的监听</div><div class="line">			return true;</div><div class="line">           case R.id.toolbar_action1:</div><div class="line">               // do something</div><div class="line">               Toast.makeText(this, &quot;显示的菜单被点击了&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">               return true;</div><div class="line">           case R.id.toolbar_action2:</div><div class="line">               // do something</div><div class="line">               Toast.makeText(this, &quot;隐藏的菜单被点击了&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">               return true;</div><div class="line">           default:</div><div class="line">               // If we got here, the user&apos;s action was not recognized.</div><div class="line">               // Invoke the superclass to handle it.</div><div class="line">               return super.onOptionsItemSelected(item);</div><div class="line"></div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>好了,toolbar的简单使用就到此结束了,足够我们在开发中使用,后期我们会进行一些高级用法的介绍</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/18/如何发布新的blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/18/如何发布新的blog/" itemprop="url">如何发布新的blog</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-18T14:29:45+08:00">
                2017-12-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="移动到blog目录"><a href="#移动到blog目录" class="headerlink" title="移动到blog目录"></a>移动到blog目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd  blog</div></pre></td></tr></table></figure>
<h2 id="创建新的文章"><a href="#创建新的文章" class="headerlink" title="创建新的文章"></a>创建新的文章</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new blog名字</div></pre></td></tr></table></figure>
<h2 id="清理缓存"><a href="#清理缓存" class="headerlink" title="清理缓存"></a>清理缓存</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo clean</div></pre></td></tr></table></figure>
<h2 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo generate</div><div class="line">可以简写为</div><div class="line">hexo g</div></pre></td></tr></table></figure>
<h2 id="快速部署文章到服务器"><a href="#快速部署文章到服务器" class="headerlink" title="快速部署文章到服务器"></a>快速部署文章到服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo deploy</div><div class="line">可以简写为</div><div class="line">hexo d</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/23/自定义view-底部弹出PopuWindow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/23/自定义view-底部弹出PopuWindow/" itemprop="url">自定义view_底部弹出PopuWindow</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-23T11:06:00+08:00">
                2017-09-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>从底部弹出PopuWindow在开发中是一个经常用到的问题,代码枯燥,又没有什么技术含量,我就把它封装了一下,以最简单的方式实现它.</p>
</blockquote>
<h2 id="看下效果图"><a href="#看下效果图" class="headerlink" title="看下效果图"></a>看下效果图</h2><p><img src="http://upload-images.jianshu.io/upload_images/5304164-6e589e4f72190641?imageMogr2/auto-orient/strip" alt="这里写图片描述"></p>
<h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><h3 id="基础类"><a href="#基础类" class="headerlink" title="基础类"></a>基础类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div></pre></td><td class="code"><pre><div class="line">package cn.yuan.xiaoyu.testmodule.view.picker;</div><div class="line"></div><div class="line">import android.content.Context;</div><div class="line">import android.graphics.Rect;</div><div class="line">import android.graphics.drawable.ColorDrawable;</div><div class="line">import android.os.Build;</div><div class="line">import android.support.annotation.LayoutRes;</div><div class="line">import android.view.Gravity;</div><div class="line">import android.view.LayoutInflater;</div><div class="line">import android.view.View;</div><div class="line">import android.view.ViewGroup;</div><div class="line">import android.widget.LinearLayout;</div><div class="line">import android.widget.PopupWindow;</div><div class="line"></div><div class="line">import cn.yuan.xiaoyu.R;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by yukuoyuan on 2017/9/23.</div><div class="line"> * 这是一个底部的最基础的弹窗</div><div class="line"> */</div><div class="line">public abstract class BasePopupWindow extends PopupWindow implements View.OnClickListener &#123;</div><div class="line">    /**</div><div class="line">     * 上下文</div><div class="line">     */</div><div class="line">    private Context context;</div><div class="line">    /**</div><div class="line">     * 最上边的背景视图</div><div class="line">     */</div><div class="line">    private View vBgBasePicker;</div><div class="line">    /**</div><div class="line">     * 内容viewgroup</div><div class="line">     */</div><div class="line">    private LinearLayout llBaseContentPicker;</div><div class="line"></div><div class="line">    public BasePopupWindow(Context context) &#123;</div><div class="line">        super(context);</div><div class="line">        this.context = context;</div><div class="line">        View view = View.inflate(context, R.layout.picker_base, null);</div><div class="line">        vBgBasePicker = view.findViewById(R.id.v_bg_base_picker);</div><div class="line">        llBaseContentPicker = (LinearLayout) view.findViewById(R.id.ll_base_content_picker);</div><div class="line">        /***</div><div class="line">         * 添加布局到界面中</div><div class="line">         */</div><div class="line">        llBaseContentPicker.addView(View.inflate(context, getContentViews(), null));</div><div class="line">        setContentView(view);</div><div class="line">        //设置PopupWindow弹出窗体的宽</div><div class="line">        this.setWidth(ViewGroup.LayoutParams.MATCH_PARENT);</div><div class="line">        //设置PopupWindow弹出窗体的高</div><div class="line">        this.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);</div><div class="line">        setFocusable(true);//设置获取焦点</div><div class="line">        setTouchable(true);//设置可以触摸</div><div class="line">        setOutsideTouchable(true);//设置外边可以点击</div><div class="line">        ColorDrawable dw = new ColorDrawable(0xffffff);</div><div class="line">        setBackgroundDrawable(dw);</div><div class="line">        //设置SelectPicPopupWindow弹出窗体动画效果</div><div class="line">        this.setAnimationStyle(R.style.BottomDialogWindowAnim);</div><div class="line">        initView(view);</div><div class="line">        initListener();</div><div class="line">        initData();</div><div class="line">        vBgBasePicker.setOnClickListener(this);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化数据</div><div class="line">     */</div><div class="line">    protected abstract void initData();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化监听</div><div class="line">     */</div><div class="line">    protected abstract void initListener();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化view</div><div class="line">     *</div><div class="line">     * @param view</div><div class="line">     */</div><div class="line">    protected abstract void initView(View view);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化布局</div><div class="line">     *</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    protected abstract int getContentViews();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 为了适配7.0系统以上显示问题(显示在控件的底部)</div><div class="line">     *</div><div class="line">     * @param anchor</div><div class="line">     */</div><div class="line">    @Override</div><div class="line">    public void showAsDropDown(View anchor) &#123;</div><div class="line">        if (Build.VERSION.SDK_INT &gt;= 24) &#123;</div><div class="line">            Rect rect = new Rect();</div><div class="line">            anchor.getGlobalVisibleRect(rect);</div><div class="line">            int h = anchor.getResources().getDisplayMetrics().heightPixels - rect.bottom;</div><div class="line">            setHeight(h);</div><div class="line">        &#125;</div><div class="line">        super.showAsDropDown(anchor);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 展示在屏幕的底部</div><div class="line">     *</div><div class="line">     * @param layoutid rootview</div><div class="line">     */</div><div class="line">    public void showAtLocation(@LayoutRes int layoutid) &#123;</div><div class="line">        showAtLocation(LayoutInflater.from(context).inflate(layoutid, null),</div><div class="line">                Gravity.TOP | Gravity.CENTER_HORIZONTAL, 0, 0);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 最上边视图的点击事件的监听</div><div class="line">     *</div><div class="line">     * @param v</div><div class="line">     */</div><div class="line">    @Override</div><div class="line">    public void onClick(View v) &#123;</div><div class="line">        switch (v.getId()) &#123;</div><div class="line">            case R.id.v_bg_base_picker:</div><div class="line">                dismiss();</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="用到的布局"><a href="#用到的布局" class="headerlink" title="用到的布局"></a>用到的布局</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;View</div><div class="line">        android:id=&quot;@+id/v_bg_base_picker&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;</div><div class="line">        android:layout_weight=&quot;1&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;LinearLayout</div><div class="line">        android:id=&quot;@+id/ll_base_content_picker&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_alignParentBottom=&quot;true&quot;</div><div class="line">        android:orientation=&quot;vertical&quot; /&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h3 id="用到的动画样式"><a href="#用到的动画样式" class="headerlink" title="用到的动画样式"></a>用到的动画样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 底部的dialog弹出的动画样式--&gt;</div><div class="line">  &lt;style name=&quot;BottomDialogWindowAnim&quot; parent=&quot;android:Animation&quot;&gt;</div><div class="line">      &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@anim/dialog_enter_anim&lt;/item&gt;</div><div class="line">      &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@anim/dialog_exit_anim&lt;/item&gt;</div><div class="line">  &lt;/style&gt;</div></pre></td></tr></table></figure>
<h3 id="展示的时候的动画"><a href="#展示的时候的动画" class="headerlink" title="展示的时候的动画"></a>展示的时候的动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line"></div><div class="line">    &lt;translate</div><div class="line">        android:duration=&quot;400&quot;</div><div class="line">        android:fromYDelta=&quot;1080&quot;</div><div class="line">        android:toYDelta=&quot;0&quot; /&gt;</div><div class="line">&lt;/set&gt;</div></pre></td></tr></table></figure>
<h3 id="退出时的动画"><a href="#退出时的动画" class="headerlink" title="退出时的动画"></a>退出时的动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</div><div class="line"></div><div class="line">    &lt;translate</div><div class="line">	    android:fromYDelta=&quot;0&quot;   </div><div class="line">	    android:toYDelta=&quot;1080&quot;   </div><div class="line">	    android:duration=&quot;400&quot; /&gt;</div><div class="line"></div><div class="line">&lt;/set&gt;</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>通过以上的步骤,我们最基础的从底部弹出的popuwindow就算封装好了</p>
</blockquote>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用?"></a>如何使用?</h2><h3 id="我们以ios的选择弹窗为例"><a href="#我们以ios的选择弹窗为例" class="headerlink" title="我们以ios的选择弹窗为例"></a>我们以ios的选择弹窗为例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">package cn.yuan.xiaoyu.testmodule.view.picker;</div><div class="line"></div><div class="line">import android.content.Context;</div><div class="line">import android.view.View;</div><div class="line"></div><div class="line">import cn.yuan.xiaoyu.R;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by yukuoyuan on 2017/9/23.</div><div class="line"> */</div><div class="line"></div><div class="line">public class IOsCheckView extends BasePopupWindow &#123;</div><div class="line">    public IOsCheckView(Context context) &#123;</div><div class="line">        super(context);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void initData() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void initListener() &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void initView(View view) &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected int getContentViews() &#123;</div><div class="line">        return R.layout.picker_time;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="布局代码"><a href="#布局代码" class="headerlink" title="布局代码"></a>布局代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;wrap_content&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;42dp&quot;</div><div class="line">        android:background=&quot;@android:color/black&quot;</div><div class="line">        android:gravity=&quot;center&quot;</div><div class="line">        android:text=&quot;测试1&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;View</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;1px&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;TextView</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;42dp&quot;</div><div class="line">        android:background=&quot;@android:color/black&quot;</div><div class="line">        android:gravity=&quot;center&quot;</div><div class="line">        android:text=&quot;测试2&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h3 id="展示调用"><a href="#展示调用" class="headerlink" title="展示调用"></a>展示调用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">IOsCheckView timePickerView = new IOsCheckView(this);</div><div class="line">               if (timePickerView != null &amp;&amp; !timePickerView.isShowing()) &#123;</div><div class="line">                   /**</div><div class="line">                    * 参数为你当前Activity或者Fragment的布局</div><div class="line">                    */</div><div class="line">                   timePickerView.showAtLocation(R.layout.activity_test);</div><div class="line">               &#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ok就可以看到最开始我们的那个效果图了.有什么问题,欢迎留言给我,谢谢</p>
</blockquote>
<hr>
<h2 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h2><blockquote>
<p>本人技术有限,还有很多不完美的地方,欢迎指出.(写作不易,谢谢您的star支持)</p>
</blockquote>
<ul>
<li>QQ:152046273</li>
<li>Email:yukuoyuan@hotmail.com</li>
<li><a href="http://blog.csdn.net/easkshark" target="_blank" rel="external">CSDN博客地址</a></li>
<li><a href="https://yukuoyuan.github.io/archives/" target="_blank" rel="external">Github博客地址</a></li>
<li><a href="https://github.com/yukuoyuan" target="_blank" rel="external">Github地址</a></li>
</ul>
<p><div id="container"></div></p>
<p><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"></p>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: 'location.href', // 可选。默认为 location.href
  owner: 'yukuoyuan',
  repo: 'yukuoyuan.github.io',
  oauth: {
    client_id: '305697cd991bc18f3231',
    client_secret: '1c1040fcd1151b2eeff8287dafd6ba00378db098',
  },
})
gitment.render('container')
</script>



          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/19/Kotlin进阶二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/19/Kotlin进阶二/" itemprop="url">Kotlin进阶(二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-19T19:37:04+08:00">
                2017-09-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>本章会讲一些Fragment的一些扩展方法和使用</p>
</blockquote>
<h1 id="创建我们的NewsFragment-kt文件"><a href="#创建我们的NewsFragment-kt文件" class="headerlink" title="创建我们的NewsFragment.kt文件"></a>创建我们的NewsFragment.kt文件</h1><p>创建一个NewsFragment.kt之后,我们试着使用Recycleview.用Kotlin的形式</p>
<figure class="highlight plain"><figcaption><span>var newsList: RecyclerView? </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@SuppressLint(&quot;NewApi&quot;)</div><div class="line">override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View &#123;</div><div class="line">    /**</div><div class="line">     * 填充一个视图</div><div class="line">     */</div><div class="line">    val view = inflater?.inflate(R.layout.fragment_news, container, false);</div><div class="line">    /**</div><div class="line">     * 获取控件</div><div class="line">     */</div><div class="line">    newsList = view.findViewById(R.id.rcv_test_fragment) as RecyclerView;</div><div class="line">    /**</div><div class="line">     * 设置控件的布局方式</div><div class="line">     */</div><div class="line">    newsList?.layoutManager = LinearLayoutManager(context);</div><div class="line">    return view!!;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="通过上边的代码我们可以学到几个东西"><a href="#通过上边的代码我们可以学到几个东西" class="headerlink" title="通过上边的代码我们可以学到几个东西"></a>通过上边的代码我们可以学到几个东西</h2><ul>
<li>封装的方法</li>
<li>默认的参数</li>
<li>Android的扩展(绑定视图)</li>
</ul>
<h3 id="封装的方法"><a href="#封装的方法" class="headerlink" title="封装的方法"></a>封装的方法</h3><p>扩展函数允许我们通过添加新的函数来扩展一个类的功能。class不一定是我们的（可以是第三方party library），也不需要我们继承class.</p>
<p>我们可以为现有的类添加新的函数，这就是我们现在将用ViewGroup类看到的.我们也将了解它是如何工作的以及如何从Java中使用它</p>
<p>正如你所知，ViewGroup是Android SDK中的一个类，为了使用它，我们必须这样做<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">inflater.inflate(R.layout.news_fragment, container, false)</div></pre></td></tr></table></figure></p>
<p>我们封装之后可以这么写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">val view = container?.inflate(R.layout.news_fragment)</div></pre></td></tr></table></figure>
<p>那么我们是如何实现的呢?<br>首先我们创建一个Extensions.kt文件.代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun ViewGroup.inflate(layoutId: Int): View &#123;</div><div class="line">    return LayoutInflater.from(context).inflate(layoutId, this, false)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过上边的代码我们为ViewGroup添加了一个扩展的方法.对比一下java和kotlin的调用的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// Java</div><div class="line">ExtensionsKt.inflate(container, R.layout.news_fragment);</div><div class="line">// Kotlin</div><div class="line">container?.inflate(R.layout.news_fragment)</div></pre></td></tr></table></figure>
<p>我们可以很直观的看到,kotlin不需要任何的继承或者对象引用,可以直接进行使用,并且我们添加了一个?,<br>这是为了检测是否是空,避免空指针异常的抛出</p>
<p>我们也可以给此文件的最上边添加一个声明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@file:JvmName(&quot;ExtensionsUtils&quot;)</div><div class="line">package cn.yky.koyun.common</div><div class="line"></div><div class="line">import android.view.LayoutInflater</div><div class="line">import android.view.View</div><div class="line">import android.view.ViewGroup</div><div class="line"></div><div class="line">fun ViewGroup.inflate(layoutId: Int): View &#123;</div><div class="line">    return LayoutInflater.from(context).inflate(layoutId, this, false)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样的话我们可以通过java的形式进行调用了,代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ExtensionsUtils.inflate(container, R.layout.news_fragment);</div></pre></td></tr></table></figure></p>
<h3 id="参数的默认值"><a href="#参数的默认值" class="headerlink" title="参数的默认值"></a>参数的默认值</h3><p>上边封装的方法,我们发现少了一个参数,就是是否添加到父布局的参数,我们加上,并设置默认值,代码如下.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fun ViewGroup.inflate(layoutId: Int, attachToRoot: Boolean = false): View &#123;</div><div class="line">    return LayoutInflater.from(context).inflate(layoutId, this, attachToRoot)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果你不指定attachToRoot参数，它将采用默认值，所以你可以用不同的方式调用它:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">container?.inflate(R.layout.news_fragment) // default: false</div><div class="line">container?.inflate(R.layout.news_fragment, true)</div></pre></td></tr></table></figure></p>
<h2 id="Android扩展的方法"><a href="#Android扩展的方法" class="headerlink" title="Android扩展的方法"></a>Android扩展的方法</h2><p>例如 “findViewById()”,Android扩展中添加了很多方便的扩展方法,允许我们访问视图的元素，因为它是我们的Activity或Fragment中的一个属性，已经设置了正确的视图类型.</p>
<p>在开始之前,我们先配置一下我们Android Extensions启用.改我们应用程序模块中的build.gradle文件，应用kotlin-android-extensions插件并使用gradle重新同步</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">apply plugin: &apos;com.android.application&apos;</div><div class="line"></div><div class="line">apply plugin: &apos;kotlin-android&apos;</div><div class="line">//添加Adnroid扩展插件</div><div class="line">apply plugin: &apos;kotlin-android-extensions&apos;</div></pre></td></tr></table></figure>
<p>准备好！让我们替换findViewById.</p>
<p>布局代码</p>
<figure class="highlight plain"><figcaption><span>version</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;&gt;</div><div class="line"></div><div class="line">    &lt;android.support.v7.widget.RecyclerView</div><div class="line">        android:id=&quot;@+id/news_list&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot; /&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>NewsFragment.kt代码为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">import kotlinx.android.synthetic.main.fragment_news.*</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by yukuoyuan on 2017/9/20.</div><div class="line"> */</div><div class="line">class NewsFragment : Fragment() &#123;</div><div class="line"></div><div class="line">    @SuppressLint(&quot;NewApi&quot;)</div><div class="line">    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View &#123;</div><div class="line">        /**</div><div class="line">         * 填充一个视图</div><div class="line">         */</div><div class="line">        val view = container?.inflate(R.layout.fragment_news);</div><div class="line">        /**</div><div class="line">         * 设置控件的布局方式</div><div class="line">         */</div><div class="line">        news_list.layoutManager = LinearLayoutManager(context);</div><div class="line">        return view!!;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上边的代码中,<strong>我们移除了成员变量,移除了findviewbyid()(总共两行代码)</strong>;直接用id的形式进行引用,并且我们发现多了一个导入,并且也没有”?”,那是因为它是一个不能为空的属性.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import kotlinx.android.synthetic.main.fragment_news.*</div></pre></td></tr></table></figure>
<p><div id="container"></div></p>
<p><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"></p>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: 'location.href', // 可选。默认为 location.href
  owner: 'yukuoyuan',
  repo: 'yukuoyuan.github.io',
  oauth: {
    client_id: '305697cd991bc18f3231',
    client_secret: '1c1040fcd1151b2eeff8287dafd6ba00378db098',
  },
})
gitment.render('container')
</script>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/16/Kotlin进阶一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yukuoyuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Martin Yu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/16/Kotlin进阶一/" itemprop="url">Kotlin进阶(一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T11:00:11+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Kotlin语法"><a href="#Kotlin语法" class="headerlink" title="Kotlin语法"></a>Kotlin语法</h2><blockquote>
<p>从第一篇文章中我们已经大概了解了如何创建一个kontlin语言的项目,或者如何从java转换为kotlin,本篇博客,将从最初的kotlin和java的却别慢慢学习kotlin语法.</p>
<h3 id="代码的区别"><a href="#代码的区别" class="headerlink" title="代码的区别"></a>代码的区别</h3><h4 id="kotlin代码"><a href="#kotlin代码" class="headerlink" title="kotlin代码"></a>kotlin代码</h4></blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package cn.yky.koyun</div><div class="line"></div><div class="line">import android.support.v7.app.AppCompatActivity</div><div class="line">import android.os.Bundle</div><div class="line">import android.widget.TextView</div><div class="line"></div><div class="line">class MainActivity : AppCompatActivity() &#123;</div><div class="line"></div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_main)</div><div class="line">        /**</div><div class="line">         * 查找控件</div><div class="line">         */</div><div class="line">        val tvtest = findViewById(R.id.tv_main_test) as TextView</div><div class="line">        /**</div><div class="line">         * 设置控件内容</div><div class="line">         */</div><div class="line">        tvtest.setText(&quot;好玩不好玩&quot;)</div><div class="line">        /**</div><div class="line">         * 调用方法输出控制台</div><div class="line">         */</div><div class="line">        testfor(&quot;你说什么&quot;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fun testfor(s: String) : Unit &#123;</div><div class="line">        print(s)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="java代码"><a href="#java代码" class="headerlink" title="java代码"></a>java代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">public class MainActivity extends AppCompatActivity &#123;</div><div class="line"></div><div class="line"></div><div class="line">    private String TAG = &quot;MainActivity&quot;;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        TextView tvMainTest = (TextView) findViewById(R.id.tv_main_test);</div><div class="line">        tvMainTest.setText(&quot;好玩不好玩&quot;);</div><div class="line">        testfor(&quot;你说什么&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void testfor(String s) &#123;</div><div class="line">        Log.d(TAG, s);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="代码区别"><a href="#代码区别" class="headerlink" title="代码区别"></a>代码区别</h2><h3 id="extends和Implement"><a href="#extends和Implement" class="headerlink" title="extends和Implement"></a>extends和Implement</h3><ul>
<li>首先我们看到java代码中的’extends’被替换为’:’,如果是’Implement’,也会被替换为’:’</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><blockquote>
<p>“public void testfor(String s)”被转换为了”fun testfor(s: String) : Unit”</p>
</blockquote>
<p>其中Unit指的是返回值为void,如果返回为空也可以写成以下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fun testfor(s: String)</div></pre></td></tr></table></figure>
<p>其中参数部分转换也比较大,但是也很好理解,那就是参数s继承于String类型</p>
<h3 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h3><p>我们通过代码对比,有没有惊奇的发现没有’;’了,麻麻再也不用担心写代码忘记’;’了.</p>
<h3 id="值和变量"><a href="#值和变量" class="headerlink" title="值和变量"></a>值和变量</h3><p>变量的话用”var”定义,如果说是常量的话用”val”进行定义,用法如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">val price = 100 //整型,可以编译</div><div class="line">price = 30;     //不可以编译,因为已经用val定义过它是个常量</div><div class="line">var name = &quot;are you ok&quot; //字符串,可以编译</div><div class="line">name = &quot;詹姆斯&quot; //字符串,可以编译,因为他是被定义为var的变量</div><div class="line">name=123 //不可以编译,因为开始的时候已经把它定义为一个字符串了</div><div class="line">var total=price*3   //整型,计算得出常量</div></pre></td></tr></table></figure>
<blockquote>
<p>以上我们理解了 “val”和”var”的区别了吗,不理解的可以多敲代码,写示例!!!或者留言给我思密达</p>
</blockquote>
<p>你也可以直接指定常量或者变量的类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val name :String =&quot;yukoyun&quot;</div><div class="line">var size : Double = 15.0</div><div class="line">var time : Float = 22f</div></pre></td></tr></table></figure>
<blockquote>
<p>发现了一个其他的事情没有哈,我们没有使用”double”,而是使用了”Double”,这是因为在Kotlin中,一切都是对象,为了实现性能,编译器会将一些对象转换为内部的原始类型</p>
</blockquote>
<h3 id="属性或者一些字段的获取"><a href="#属性或者一些字段的获取" class="headerlink" title="属性或者一些字段的获取"></a>属性或者一些字段的获取</h3><blockquote>
<p>在kotlin中,你可以获取一些属性像java一样,例如,获取资源文件的字符串</p>
</blockquote>
<h4 id="kotlin代码-1"><a href="#kotlin代码-1" class="headerlink" title="kotlin代码"></a>kotlin代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resources.getString(R.string.abc_capital_off);</div></pre></td></tr></table></figure>
<h4 id="java代码-1"><a href="#java代码-1" class="headerlink" title="java代码"></a>java代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getResources().getString(R.string.app_name);</div></pre></td></tr></table></figure>
<h3 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h3><p>Kotlin最好的一件事就是,一切不能为空,除非你声明为空.通过使用’?’来实现.通过’?’来标识你的值可能存在,也有可能不存在.</p>
<h4 id="看下代码示例"><a href="#看下代码示例" class="headerlink" title="看下代码示例"></a>看下代码示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var t: String = null //不能编译通过</div><div class="line">var i: Int   //不用做初始化.</div><div class="line">var b: String? = null //这是可以进行编译通过的</div></pre></td></tr></table></figure>
<h3 id="更安全的调用"><a href="#更安全的调用" class="headerlink" title="更安全的调用"></a>更安全的调用</h3><p>用一个空的对象调用它的方法,是很容易出现空指针异常的.那么我们也可以通过’?’来避免这个问题的存在</p>
<h4 id="看下代码示例-1"><a href="#看下代码示例-1" class="headerlink" title="看下代码示例"></a>看下代码示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">val context : Context? = null</div><div class="line">val res = context?.getResources() // 不会crash,但是res的结果是null</div></pre></td></tr></table></figure>
<p>如果你想获取一个字符串的话,你会这么写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">val context : Context? = null</div><div class="line">val res = context?.getResources() </div><div class="line">val appName = res?.getString(R.string.app_name)</div><div class="line">val shortName = appName?.substring(0, 3)</div></pre></td></tr></table></figure>
<p>但是这样我觉得,如果第一个是空的话,就没有必要走下一步了,我给出的代码例如下边的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">val context : Context? = null</div><div class="line">//这是一种java加konlin</div><div class="line">if (context != null) &#123;</div><div class="line">    val res = context.getResources()    // 这里边的就不需要写&apos;?&apos;了</div><div class="line">    val appName = res.getString(R.string.app_name)</div><div class="line">    val shortName = appName.substring(0, 2)</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">*纯kotlin实现</div><div class="line">*/</div><div class="line">val context : Context? = null</div><div class="line">//一旦为null,就不需要走代码块了</div><div class="line">context?.let &#123;</div><div class="line">    val res = context.getResources()    // 这里边的就不需要写&apos;?&apos;了</div><div class="line">    val appName = res.getString(R.string.app_name)</div><div class="line">    val shortName = appName.substring(0, 2)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>更多语法可以参考kotlin的<a href="http://www.kotlindoc.cn/GettingStarted/Idioms.html" target="_blank" rel="external">中文文档</a></p>
</blockquote>
<p><div id="container"></div></p>
<p><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"></p>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id: 'location.href', // 可选。默认为 location.href
  owner: 'yukuoyuan',
  repo: 'yukuoyuan.github.io',
  oauth: {
    client_id: '305697cd991bc18f3231',
    client_secret: '1c1040fcd1151b2eeff8287dafd6ba00378db098',
  },
})
gitment.render('container')
</script>






          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="http://7xp26r.com1.z0.glb.clouddn.com/mmexport1504411147838.jpg"
              alt="yukuoyuan" />
          
            <p class="site-author-name" itemprop="name">yukuoyuan</p>
            <p class="site-description motion-element" itemprop="description">男人要么拎枪保家卫国,要么办公室运筹帷幄</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yukuoyuan" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/easkshark" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      CSDN
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" title="主题">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      主题
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/3901112739/profile?topnav=1&wvr=6" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      微博
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yukuoyuan</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
